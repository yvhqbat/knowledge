## 什么是多版本并发控制？
数据库的并发控制，包括表锁/行级锁/多版本并发控制。
多版本并发控制（MVCC),是基于提升并发性能的考虑。MVCC可以认为是行级锁的变种，在很多情况下避免了加锁操作，开销更低。
Mysql InnoDB 实现的MVCC，是通过在每行记录后面保存两个隐藏的列来实现的，一列保存行的创建时间，一列保存行的过期时间（时间是指系统版本号）。

MVCC的具体操作：
- SELECT，会根据两个条件过滤，返回符合条件的查询结果：
  - 数据行的版本号小于当前事务版本号；
  - 行的删除版本号要么未定义，要么大于当前事务版本号；
- INSERT，为新插入的行添加当前事务版本号作为行版本号；
- DELETE，为删除的每一行添加当前事务版本号作为行删除标识；
- UPDATE，插入一行新记录，并保存当前事务版本号作为行版本号。同时，保存当前事务版本号作为原行的删除标识；

